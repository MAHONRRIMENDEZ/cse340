<main class="container">
  <h1>Add New Classification</h1>

  <!-- Mensajes flash -->
  <% if (typeof success_msg !== 'undefined') { %>
    <div class="flash flash-success"><%= success_msg %></div>
  <% } %>

  <% if (typeof error_msg !== 'undefined') { %>
    <div class="flash flash-error"><%= error_msg %></div>
  <% } %>

  <% if (typeof errors !== 'undefined' && errors.length) { %>
    <ul class="flash flash-errors">
      <% errors.forEach(function(err){ %>
        <li><%= err.msg || err %></li>
      <% }) %>
    </ul>
  <% } %>

  <form id="addClassificationForm" action="/inv/add-classification" method="POST" novalidate>
    <label for="classification_name">Classification Name:</label>
    <input
      type="text"
      id="classification_name"
      name="classification_name"
      pattern="^[A-Za-z0-9]+$"
      title="No spaces or special characters allowed"
      required
      value="<%= typeof classification_name !== 'undefined' ? classification_name : '' %>"
    />
    <button type="submit">Add Classification</button>
  </form>
</main>

<script>
  document.getElementById('addClassificationForm').addEventListener('submit', function(event) {
    const input = this.classification_name;
    const pattern = /^[A-Za-z0-9]+$/;
    if (!pattern.test(input.value)) {
      event.preventDefault();
      alert('Classification name must not contain spaces or special characters.');
      input.focus();
    }
  });
</script>
